{"benchmark_view":"CREATE \nOR REPLACE VIEW `benchmark_view` AS \nSELECT \n  `benchmark`.*, \n  `project`.`client_id`, \n  `client`.`association_id` \nFROM \n  `benchmark` \n  JOIN `project` ON `project`.`project_id` = `benchmark`.`project_id` \n  JOIN `client` ON `client`.`client_id` = `project`.`client_id`","estimate_view":"CREATE \nOR REPLACE VIEW `estimate_view` AS \nSELECT \n  `estimate`.*, \n  CAST(\n    SUM(\n      IFNULL(\n        `estimate_item`.`estimate_item_amount`, \n        0\n      )\n    ) AS DECIMAL(18, 2)\n  ) AS estimate_total, \n  `project`.`client_id`, \n  `client`.`association_id` \nFROM \n  `estimate` \n  JOIN `project` ON `project`.`project_id` = `estimate`.`project_id` \n  LEFT JOIN `estimate_benchmark` ON `estimate_benchmark`.`estimate_id` = `estimate`.`estimate_id` \n  AND `estimate_benchmark`.`estimate_benchmark_delete_time` IS NULL \n  LEFT JOIN `estimate_item` ON `estimate_item`.`estimate_benchmark_id` = `estimate_benchmark`.`estimate_benchmark_id` \n  AND `estimate_item`.`estimate_item_delete_time` IS NULL \n  LEFT JOIN `client` ON `client`.`client_id` = `project`.`client_id` \nGROUP BY \n  `estimate`.`estimate_id`","invoice_view":"CREATE \nOR REPLACE VIEW `invoice_view` AS \nSELECT \n  `invoice`.*, \n  `benchmark_view`.`project_id`, \n  `benchmark_view`.`client_id`, \n  `benchmark_view`.`association_id`, \n  CAST(\n    IFNULL(\n      SUM(\n        `invoice_item_view`.`invoice_item_amount`\n      ), \n      0\n    ) AS DECIMAL(18, 2)\n  ) AS invoice_total, \n  CAST(\n    IFNULL(\n      `invoice_to_payment_view`.`applied_amount`, \n      0\n    ) AS DECIMAL(18, 2)\n  ) AS applied_amount, \n  CAST(\n    (\n      IFNULL(\n        SUM(\n          `invoice_item_view`.`invoice_item_amount`\n        ), \n        0\n      ) - IFNULL(\n        `invoice_to_payment_view`.`applied_amount`, \n        0\n      )\n    ) AS DECIMAL(18, 2)\n  ) AS invoice_open_balance, \n  `invoice_to_payment_view`.`applied_payment_ids` \nFROM \n  `invoice` \n  LEFT JOIN `benchmark_view` ON `benchmark_view`.`benchmark_id` = `invoice`.`benchmark_id` \n  LEFT JOIN `invoice_item_view` ON `invoice_item_view`.`invoice_id` = `invoice`.`invoice_id` \n  LEFT JOIN `invoice_to_payment_view` ON `invoice_to_payment_view`.`invoice_id` = `invoice`.`invoice_id` \nGROUP BY \n  `invoice`.`invoice_id`","invoice_to_payment_view":"CREATE \nOR REPLACE VIEW `invoice_to_payment_view` AS \nSELECT \n  `invoice`.`invoice_id`, \n  SUM(\n    `payment_map`.`payment_map_amount`\n  ) AS applied_amount, \n  GROUP_CONCAT(`payment_map`.`payment_id`) AS applied_payment_ids \nFROM \n  `invoice` \n  JOIN `payment_map` ON `payment_map`.`parent_id` = `invoice`.`invoice_id` \n  AND `payment_map`.`parent_type` = 'Invoice' \n  JOIN `payment` ON `payment`.`payment_id` = `payment_map`.`payment_id` \n  AND `payment`.`payment_status` = 'Approved' \nGROUP BY \n  `payment_map`.`parent_id`","invoice_item_view":"CREATE \nOR REPLACE VIEW `invoice_item_view` AS \nSELECT \n  `invoice_item`.*, \n  `invoice`.`invoice_id`, \n  `benchmark_view`.`project_id`, \n  `benchmark_view`.`client_id`, \n  `benchmark_view`.`association_id` \nFROM \n  `invoice_item` \n  JOIN `benchmark_view` ON `benchmark_view`.`benchmark_id` = `invoice_item`.`benchmark_id` \n  LEFT JOIN `invoice` ON `invoice`.`benchmark_id` = `invoice_item`.`benchmark_id`","payment_view":"CREATE \nOR REPLACE VIEW `payment_view` AS \nSELECT \n  `payment`.*, \n  `client`.`association_id` \nFROM \n  `payment` \n  JOIN `client` ON `client`.`client_id` = `payment`.`client_id`","payment_method_view":"CREATE \nOR REPLACE VIEW `payment_method_view` AS \nSELECT \n  `payment_method`.*, \n  `client`.`association_id` \nFROM \n  `payment_method` \n  LEFT JOIN `client` ON `client`.`client_id` = `payment_method`.`client_id`","project_view":"CREATE \nOR REPLACE VIEW `project_view` AS \nSELECT \n  `project`.*, \n  `client`.`association_id` \nFROM \n  `project` \n  JOIN `client` ON `client`.`client_id` = `project`.`client_id`","schedule_item_view":"CREATE \nOR REPLACE VIEW `schedule_item_view` AS \nSELECT \n  `schedule_item`.*, \n  `benchmark_view`.`project_id`, \n  `benchmark_view`.`client_id`, \n  `benchmark_view`.`association_id` \nFROM \n  `schedule_item` \n  LEFT JOIN `benchmark_view` ON `benchmark_view`.`benchmark_id` = `schedule_item`.`benchmark_id` \nORDER BY \n  `schedule_item`.`schedule_item_id` ASC","todo_view":"CREATE \nOR REPLACE VIEW `todo_view` AS \nSELECT \n  `todo`.*, \n  `benchmark_view`.`project_id`, \n  `benchmark_view`.`client_id`, \n  `benchmark_view`.`association_id` \nFROM \n  `todo` \n  LEFT JOIN `benchmark_view` ON `benchmark_view`.`benchmark_id` = `todo`.`benchmark_id`","client_view":"CREATE \nOR REPLACE VIEW `client_view` AS \nSELECT \n  client.*, \n  CAST(\n    IFNULL(\n      SUM(\n        invoice_view.invoice_open_balance\n      ), \n      0\n    ) AS DECIMAL(18, 2)\n  ) AS open_balance \nFROM \n  client \n  LEFT JOIN invoice_view ON (\n    (\n      invoice_view.client_id = client.client_id\n    ) \n    AND invoice_view.invoice_open_balance >= 0\n  ) \nGROUP BY \n  client.client_id"}